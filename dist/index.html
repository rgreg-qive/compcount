<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Componentes - Design System Qive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
  <script type="module" crossorigin src="/assets/main-BKbRP9Ln.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/themeManager-CRIQpY6X.js">
</head>
  <body class="bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200">
    <!-- Header -->
    <header class="bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 mr-3">
                        <!-- Logo Qive - Light Mode -->
                        <svg class="w-12 h-7 block dark:hidden" width="95" height="54" viewBox="0 0 95 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M55.2256 52.2337H64.271V0.324219H55.2256V22.6185C52.263 19.3834 48.0911 17.3712 43.2832 17.3712C33.6496 17.3712 26.5391 25.5411 26.5391 35.2079V35.3326C26.5391 45.0617 33.5923 52.9822 43.1685 52.9822C48.0245 52.9822 52.2393 50.9381 55.2256 47.6646V52.2337ZM44.6022 45.3355C39.2864 45.3355 35.3711 40.8165 35.3711 35.2656V35.1945C35.3711 29.6792 39.3182 25.0179 44.6659 25.0179C49.9818 25.0179 53.8971 29.5724 53.8971 35.1233V35.1945C53.8971 40.7453 49.9499 45.3355 44.6022 45.3355Z" fill="#100F0D"/>
                            <path d="M21.6523 17.375L11.0107 35.1807L21.6523 52.9863H10.6943L0 35.1797L10.6943 17.375H21.6523Z" fill="#EF3923"/>
                            <path d="M72.4033 53.0488H83.3604L94.0547 35.2432L83.3604 17.4375H72.4033L83.0439 35.2432L72.4033 53.0488Z" fill="#EF3923"/>
                        </svg>
                        <!-- Logo Qive - Dark Mode -->
                        <svg class="w-12 h-7 hidden dark:block" width="95" height="54" viewBox="0 0 95 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M56.1787 52.2337H65.2241V0.324219H56.1787V22.6185C53.2161 19.3834 49.0442 17.3712 44.2363 17.3712C34.6027 17.3712 27.4922 25.5411 27.4922 35.2079V35.3326C27.4922 45.0617 34.5454 52.9822 44.1217 52.9822C48.9776 52.9822 53.1924 50.9381 56.1787 47.6646V52.2337ZM45.5554 45.3355C40.2395 45.3355 36.3242 40.8165 36.3242 35.2656V35.1945C36.3242 29.6792 40.2713 25.0179 45.619 25.0179C50.9349 25.0179 54.8502 29.5724 54.8502 35.1233V35.1945C54.8502 40.7453 50.9031 45.3355 45.5554 45.3355Z" fill="white"/>
                            <path d="M22.5977 17.375L11.9561 35.1807L22.5977 52.9863H11.6396L0.945312 35.1797L11.6396 17.375H22.5977Z" fill="#EF3923"/>
                            <path d="M73.3564 53.0488H84.3145L95.0078 35.2432L84.3145 17.4375H73.3564L83.9971 35.2432L73.3564 53.0488Z" fill="#EF3923"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900 dark:text-white">Figma Component Analyzer</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                        v1.1.0
                    </span>
                    <a 
                        href="https://github.com/rgreg-qive/compcount" 
                        target="_blank" 
                        class="text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white flex items-center"
                        title="Ver no GitHub"
                    >
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.30 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        GitHub
                    </a>
                    <button 
                        id="logout-btn"
                        class="text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white flex items-center"
                        title="Sair"
                    >
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                        Sair
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <!-- Login Screen -->
    <div id="login-screen" class="fixed inset-0 bg-gray-50 dark:bg-gray-900 flex items-center justify-center z-50">
        <div class="max-w-md w-full space-y-8 p-8">
            <div class="text-center">
                <div class="flex justify-center mb-4">
                    <svg class="w-16 h-16 text-red-600 dark:text-red-500" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Análise de Componentes</h2>
                <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Faça login para acessar a ferramenta</p>
            </div>
            <form class="mt-8 space-y-6" id="login-form">
                <div class="space-y-4">
                    <div>
                        <label for="login-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
                        <input 
                            id="login-email" 
                            name="email" 
                            type="email" 
                            required 
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
                            placeholder="seu@email.com"
                        >
                    </div>
                    <div>
                        <label for="login-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Senha</label>
                        <input 
                            id="login-password" 
                            name="password" 
                            type="password" 
                            required 
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"
                            placeholder="Sua senha"
                        >
                    </div>
                </div>
                <div>
                    <button 
                        type="submit" 
                        class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-900"
                    >
                        Entrar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" id="main-app">
        <!-- Figma Link Input Section -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8">
                                <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Analisar Novo Frame do Figma</h2>
            <div class="space-y-4">
                <div>
                    <label for="figma-token" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Token de Acesso do Figma
                        <span class="text-red-500">*</span>
                    </label>
                    <div class="relative">
                        <input 
                            type="password" 
                            id="figma-token" 
                            name="figma-token"
                            placeholder="figd_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"
                            class="block w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 sm:text-sm"
                        >
                        <button 
                            type="button" 
                            id="toggle-token-visibility"
                            class="absolute inset-y-0 right-0 pr-3 flex items-center"
                        >
                            <svg id="eye-icon" class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="mt-2 text-xs text-gray-500">
                        <p>🔒 <strong>Seguro:</strong> O token é armazenado apenas localmente no seu navegador</p>
                        <p>📋 <strong>Como obter:</strong> 
                            <a href="https://www.figma.com/developers/api#access-tokens" target="_blank" class="text-red-600 hover:text-red-800 underline">
                                Figma → Settings → Personal Access Tokens
                            </a>
                        </p>
                    </div>
                </div>
                
                <div>
                    <label for="figma-url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Link do Frame do Figma
                    </label>
                    <div class="flex space-x-3">
                        <input 
                            type="url" 
                            id="figma-url" 
                            name="figma-url"
                            placeholder="Cole aqui o link do frame para ser analisado" 
                            class="flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 sm:text-sm"
                        >
                        <button 
                            onclick="analyzeFrame()"
                            class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                        >
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            Analisar
                        </button>
                    </div>
                </div>
                
                <div class="text-sm text-gray-600">
                    <button 
                        id="show-instructions" 
                        class="text-red-600 hover:text-red-800 underline text-sm"
                    >
                        📋 Ver instruções detalhadas
                    </button>
                </div>
                
                <!-- Loading and Status Messages -->
                <div id="analysis-status" class="hidden">
                    <!-- Alerta com dark mode completo - v1.1.0 -->
                    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-md p-4">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <svg class="animate-spin h-5 w-5 text-blue-600 dark:text-blue-400" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-blue-800 dark:text-blue-200">Analisando frame...</h3>
                                <p class="text-sm text-blue-700 dark:text-blue-300 mt-1">Extraindo componentes do Figma e comparando com o Design System.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary Cards -->
        <div id="summary-cards" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 hidden">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 summary-card">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center">
                            <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Componentes Conectados</p>
                        <p class="text-2xl font-semibold text-gray-900 dark:text-white summary-value">0</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 summary-card">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center">
                            <svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Componentes Desconectados</p>
                        <p class="text-2xl font-semibold text-gray-900 dark:text-white summary-value">0</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 summary-card">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Avaliados</p>
                        <p class="text-2xl font-semibold text-gray-900 dark:text-white summary-value">0</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts and Analysis -->
        <div id="charts-analysis" class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 hidden">
            <!-- Pie Chart -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
                <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Distribuição dos Componentes</h2>
                <div class="relative h-64">
                    <canvas id="components-chart"></canvas>
                </div>
            </div>
            
            <!-- Analysis Summary -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Resumo da Análise</h2>
                    <!-- Dropdown Gerar Relatório -->
                    <div class="relative hidden" id="report-dropdown">
                        <button 
                            id="generate-report-btn"
                            class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                            aria-expanded="false"
                            aria-haspopup="true"
                        >
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Gerar Relatório
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>

                        <!-- Dropdown Menu -->
                        <div 
                            id="report-dropdown-menu"
                            class="hidden absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black dark:ring-gray-600 ring-opacity-5 focus:outline-none z-10"
                            role="menu"
                            aria-orientation="vertical"
                        >
                            <div class="py-1" role="none">
                                <button 
                                    id="export-png"
                                    class="group flex items-center w-full px-4 py-2 text-sm text-gray-400 cursor-not-allowed opacity-60"
                                    role="menuitem"
                                    disabled
                                >
                                    <svg class="w-4 h-4 mr-3 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    Salvar como PNG
                                    <span class="ml-auto text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded">WIP</span>
                                </button>
                                <button 
                                    id="export-pdf"
                                    class="group flex items-center w-full px-4 py-2 text-sm text-gray-400 cursor-not-allowed opacity-60"
                                    role="menuitem"
                                    disabled
                                >
                                    <svg class="w-4 h-4 mr-3 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    Exportar PDF
                                    <span class="ml-auto text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded">WIP</span>
                                </button>
                                <button 
                                    id="generate-link"
                                    class="group flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"
                                    role="menuitem"
                                >
                                    <svg class="w-4 h-4 mr-3 text-gray-400 group-hover:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                                    </svg>
                                    Gerar Link
                                </button>
                                <button 
                                    id="export-checklist"
                                    class="group flex items-center w-full px-4 py-2 text-sm text-gray-400 cursor-not-allowed opacity-60"
                                    role="menuitem"
                                    disabled
                                >
                                    <svg class="w-4 h-4 mr-3 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                    </svg>
                                    Checklist Ação
                                    <span class="ml-auto text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded">WIP</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full"></div>
                            </div>
                            <span class="ml-3 text-sm font-medium text-green-900 dark:text-green-100">Conectados ao Design System</span>
                        </div>
                        <span class="text-sm font-semibold text-green-900 dark:text-green-100" id="connected-count">0</span>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-2 h-2 bg-red-500 dark:bg-red-400 rounded-full"></div>
                            </div>
                            <span class="ml-3 text-sm font-medium text-red-900 dark:text-red-200">Fora do Design System</span>
                        </div>
                        <span class="text-sm font-semibold text-red-900 dark:text-red-200" id="disconnected-count">0</span>
                    </div>
                    
                    <div class="pt-3 border-t border-gray-200 dark:border-gray-600">
                        <div class="flex items-center justify-between">
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Taxa de Conformidade</span>
                            <div class="flex items-center space-x-2">
                                <span class="text-lg font-bold text-gray-900 dark:text-white" id="compliance-rate">0%</span>
                                <span id="compliance-status" class="hidden px-2 py-1 text-xs font-medium rounded-full"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Components Table -->
        <div id="components-table" class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hidden">
            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Detalhes dos Componentes</h2>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                Nome do Componente
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                Tipo
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                Status
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                Node ID
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                Incluir
                            </th>
                        </tr>
                    </thead>
                    <tbody id="components-table-body" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                        <!-- Dados serão inseridos via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Feedback Section -->
        <div class="mt-6 flex justify-center">
            <button 
                id="show-feedback-form"
                class="hidden inline-flex items-center px-6 py-3 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md shadow-sm text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
            >
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                </svg>
                                        Dar feedback sobre a análise feita
            </button>
        </div>
    </main>

    <!-- Modal de Instruções -->
    <div id="instructions-modal" class="fixed inset-0 bg-gray-600 dark:bg-gray-900 bg-opacity-50 dark:bg-opacity-75 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border border-gray-200 dark:border-gray-700 w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="mt-3">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">📋 Instruções para Análise Completa</h3>
                    <button id="close-instructions" class="text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="space-y-4 text-sm text-gray-700 dark:text-gray-300">
                    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-md p-4">
                        <h4 class="font-semibold text-blue-800 dark:text-blue-300 mb-2">🔑 Como obter o Token do Figma:</h4>
                        <ol class="list-decimal list-inside space-y-1 text-blue-700 dark:text-blue-300">
                            <li>Acesse <strong>Figma → Settings → Personal Access Tokens</strong></li>
                            <li>Clique em <strong>"Create new token"</strong></li>
                            <li>Dê um nome para o token (ex: "Análise de Componentes")</li>
                            <li>Selecione a permissão <strong>"File content:read"</strong></li>
                            <li>Copie o token gerado e cole no campo acima</li>
                        </ol>
                    </div>

                    <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md p-4">
                        <h4 class="font-semibold text-green-800 dark:text-green-300 mb-2">🔗 Como obter o Link do Frame:</h4>
                        <ol class="list-decimal list-inside space-y-1 text-green-700 dark:text-green-300">
                            <li>Abra o arquivo no Figma</li>
                            <li>Selecione o frame que deseja analisar</li>
                            <li>Clique com botão direito → <strong>"Copy link"</strong></li>
                            <li>Cole o link completo no campo acima</li>
                        </ol>
                        <div class="mt-2 p-2 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600">
                            <p class="text-xs text-gray-600 dark:text-gray-300"><strong>Exemplo de URL válida:</strong></p>
                            <code class="text-xs text-gray-800 dark:text-gray-200">https://figma.com/design/ABC123/MeuArquivo?node-id=123-456</code>
                        </div>
                    </div>

                    <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4">
                        <h4 class="font-semibold text-yellow-800 dark:text-yellow-300 mb-2">🎓 Sistema de Aprendizado:</h4>
                        <ul class="list-disc list-inside space-y-1 text-yellow-700 dark:text-yellow-300">
                            <li><span id="patterns-count-modal">Carregando...</span> padrões conhecidos salvos</li>
                            <li>Usa padrões aprendidos para frames conhecidos</li>
                            <li>Salva ajustes manuais para reutilização</li>
                            <li>Melhora com o tempo conforme você corrige</li>
                        </ul>
                    </div>

                    <div class="bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-md p-4">
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">💡 Dicas:</h4>
                        <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300">
                            <li>Use os <strong>toggles</strong> na tabela para incluir/excluir componentes</li>
                            <li>Dê <strong>feedback detalhado</strong> para melhorar futuras análises</li>
                            <li>Clique nos <strong>Node IDs</strong> para ir direto ao elemento no Figma</li>
                            <li>O sistema aprende com seus feedbacks e melhora automaticamente</li>
                        </ul>
                    </div>
                </div>

                <div class="flex justify-end mt-6">
                    <button 
                        id="close-instructions-btn"
                        class="px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 text-white text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400"
                    >
                        Entendi
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Feedback Drawer -->
    <div id="feedback-drawer" class="fixed inset-0 overflow-hidden z-50 hidden">
        <!-- Overlay -->
        <div class="absolute inset-0 bg-gray-600 dark:bg-gray-900 bg-opacity-50 dark:bg-opacity-75" id="feedback-overlay"></div>
        
        <!-- Drawer -->
        <div class="absolute right-0 top-0 h-full w-full max-w-md bg-white dark:bg-gray-800 shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col" id="feedback-drawer-content">
            <!-- Header -->
            <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
                <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">💬 Feedback Detalhado</h2>
                <button id="close-feedback-drawer" class="text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Content -->
            <div class="flex-1 overflow-y-auto p-6 min-h-0">
                <div class="space-y-6">
                    <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4">
                        <div class="flex">
                            <svg class="h-5 w-5 text-yellow-600 dark:text-yellow-400 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.742-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                            </svg>
                            <div>
                                <h3 class="text-sm font-medium text-yellow-800 dark:text-yellow-300">Sistema de Aprendizado Inteligente</h3>
                                <p class="text-sm text-yellow-700 dark:text-yellow-300 mt-1">
                                    Descreva o que estava errado na análise. O sistema criará regras automáticas para melhorar futuras análises.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label for="feedback-type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Tipo do Problema
                        </label>
                        <select 
                            id="feedback-type" 
                            class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm"
                        >
                            <option value="">Selecione o tipo do problema...</option>
                            <option value="missed_component">Componente não foi detectado</option>
                            <option value="wrong_classification">Componente foi classificado incorretamente</option>
                            <option value="should_ignore">Elemento deveria ser ignorado</option>
                            <option value="suggest_improvement">Sugerir melhoria</option>
                            <option value="other">Outro problema</option>
                        </select>
                    </div>

                    <div id="component-name-field" class="hidden">
                        <label for="component-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Nome do Componente
                        </label>
                        <input 
                            type="text" 
                            id="component-name" 
                            placeholder="Ex: Rectangle 6190, Button Primary, etc."
                            class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm"
                        >
                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Digite exatamente como aparece no Figma</p>
                    </div>

                    <div id="expected-classification-field" class="hidden">
                        <label for="expected-classification" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Classificação Correta
                        </label>
                        <select 
                            id="expected-classification" 
                            class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm"
                        >
                            <option value="">Selecione a classificação correta...</option>
                            <option value="connected">Conectado ao Design System</option>
                            <option value="disconnected">Fora do Design System</option>
                        </select>
                    </div>

                    <div>
                        <label for="feedback-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Descrição do Problema
                        </label>
                        <textarea 
                            id="feedback-description" 
                            rows="4"
                            placeholder="Descreva detalhadamente o que estava errado. Ex: 'O Rectangle 6190 é um componente visual importante que deveria ser contado como desconectado do DS, mas não foi detectado na análise.'"
                            class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm"
                        ></textarea>
                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Quanto mais detalhado, melhor o sistema aprenderá</p>
                    </div>



                    <div class="text-sm text-gray-500 dark:text-gray-400 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md">
                        <div class="flex items-center justify-between">
                            <span id="learning-stats">Carregando estatísticas...</span>
                            <button 
                                id="export-learning-data"
                                class="text-xs text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-medium underline"
                                title="Exportar todos os dados para compartilhamento"
                            >
                                📤 Exportar dados
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="border-t border-gray-200 dark:border-gray-700 p-6 flex-shrink-0">
                <div class="flex space-x-3">
                    <button 
                        id="cancel-feedback"
                        class="flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md shadow-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400"
                    >
                        Cancelar
                    </button>
                    <button 
                        id="submit-feedback"
                        class="flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400"
                    >
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Enviar Feedback
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Snackbar Container -->
    <div id="snackbar-container" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 pointer-events-none">
        <!-- Snackbars will be inserted here -->
    </div>

    <!-- Footer -->
    <footer class="bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="text-center text-sm text-gray-500 dark:text-gray-400">
                <p>Figma Component Analyzer v1.1.0</p>
                <p class="mt-1">Desenvolvido para análise de Design Systems</p>
            </div>
        </div>
    </footer>
</body>
</html> 